<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>ggqc_test</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Ambers Website</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About Me</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Projects
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Process Engineering Data</li>
    <li>
      <a href="ggqc_test.html">Control charts with ggQC</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Bikeshare data</li>
    <li>
      <a href="bikeshare_populartraveltimes.html">Popular times of travel</a>
    </li>
    <li>
      <a href="bikeshare_tripduration.html">Trip duration and user info</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:amber.m.ahmed@gmail.com">
    <span class="fa fa-envelope"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">ggqc_test</h1>

</div>


<p>I am going to test out the ggQC package in this project. I am new to R, and although I have made more than a few process QC visualizations,I have not used R for building a single one! In case you are wondering, my go to platform at work used to be JMP/JSL, but I am unemployed now, and do not want to spend the $$$ for purchasing a JMP license - thankfully R is free and this way I get to learn something new, its a WIN-WIN!</p>
<p>I am going to use the demo <a href="https://cran.r-project.org/web/packages/ggQC/vignettes/XbarR_HOTTO.html">HERE</a> as a guide.</p>
<p>First step is to create a dataset. Below code will simulate production line data from a photresist (a chemical, usually liquid, used for manufacturing computer chips) manufacturing plant. The manufacturing process is a ‘batch process’ where each batch produces 100 bottles of resist. After packaging, 3+3+3 bottles are pulled from begining, middle and end of the fill process and sent to internal QC. One of the QC check is to measure resist coat thickness after spin coating dummy silicon wafers. In reality, many variables (temperature, humidity, time elapsed between various process steps, operator, container/reactor and so on) can affect the end result.</p>
<p>In below example - to keep things simple - we will only be looking at the variability as a function of varying raw material lot.</p>
<pre class="r"><code>library(ggplot2)
set.seed(5555)
resist_df1 &lt;- data.frame(
  resist_bottle = as.factor(rep(1:9, each=3)),
  coat_thickness = rnorm(n = 3*9, mean = 10, sd = 2),
  raw_material_A_lot = as.ordered(rep(2)),
   raw_material_B_lot = as.ordered(rep(1)),
  date_run = sample(rep(seq(as.Date(&#39;2019/01/01&#39;), as.Date(&#39;2019/01/09&#39;), by=&quot;day&quot;)))

) 
head(resist_df1)</code></pre>
<pre><code>##   resist_bottle coat_thickness raw_material_A_lot raw_material_B_lot   date_run
## 1             1       8.461665                  2                  1 2019-01-09
## 2             1       9.104604                  2                  1 2019-01-06
## 3             1       7.191413                  2                  1 2019-01-07
## 4             2      10.784097                  2                  1 2019-01-03
## 5             2      11.488648                  2                  1 2019-01-02
## 6             2       7.077962                  2                  1 2019-01-04</code></pre>
<pre class="r"><code>resist_df2 &lt;- data.frame(
  resist_bottle = as.factor(rep(1:9, each=3)),
  coat_thickness = rnorm(n = 3*9, mean = 11, sd = 2.5),
  raw_material_A_lot = as.ordered(rep(2)),
   raw_material_B_lot = as.ordered(rep(1)),
  date_run = sample(rep(seq(as.Date(&#39;2019/01/11&#39;), as.Date(&#39;2019/01/19&#39;), by=&quot;day&quot;)))

) 

resist_df3 &lt;- data.frame(
  resist_bottle = as.factor(rep(1:9, each=3)),
  coat_thickness = rnorm(n = 3*9, mean = 10.5, sd = 1.6),
  raw_material_A_lot = as.ordered(rep(3)),
   raw_material_B_lot = as.ordered(rep(2)),
  date_run = sample(rep(seq(as.Date(&#39;2019/01/21&#39;), as.Date(&#39;2019/01/29&#39;), by=&quot;day&quot;)))
) 



resist_df &lt;- rbind(resist_df1, resist_df2, resist_df3)
head(resist_df)</code></pre>
<pre><code>##   resist_bottle coat_thickness raw_material_A_lot raw_material_B_lot   date_run
## 1             1       8.461665                  2                  1 2019-01-09
## 2             1       9.104604                  2                  1 2019-01-06
## 3             1       7.191413                  2                  1 2019-01-07
## 4             2      10.784097                  2                  1 2019-01-03
## 5             2      11.488648                  2                  1 2019-01-02
## 6             2       7.077962                  2                  1 2019-01-04</code></pre>
<p>Okay, now its time to try out the ggQC package.</p>
<p>First, I am going to make the control charts for the resist coat thickness.</p>
<pre class="r"><code>XbarR &lt;- ggplot(resist_df, aes(x = date_run, y = coat_thickness, group = 1)) +
         stat_summary(fun.y = mean, geom = &quot;point&quot;) +
         stat_summary(fun.y = mean, geom = &quot;line&quot;) +
         stat_QC() </code></pre>
<pre><code>## Warning: `fun.y` is deprecated. Use `fun` instead.

## Warning: `fun.y` is deprecated. Use `fun` instead.

## Warning: `fun.y` is deprecated. Use `fun` instead.

## Warning: `fun.y` is deprecated. Use `fun` instead.</code></pre>
<pre class="r"><code>XbarR</code></pre>
<p><img src="ggqc_test_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<pre class="r"><code>XbarR + stat_QC_labels()</code></pre>
<p><img src="ggqc_test_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<p>The chart looks nice. But I would like to be able to see zones (1,2,3 sigma) add spec limits, and see how the final chart turns out. I find it useful sometimes to have spec limits available in visualization for XbarR charts for mature processes because: <em>For a production process, the capability has already been established. </em>Having spec limits on the chart help in getting a quick estimate of product disposition for out of control points *Process may be stable and in control, but off target. Mean may shift over time. Lets assume that the process for which this resist will be used has spec limits set to 14.5units for USL(upper spec limit) and 6units for LSL(lower spec limit). Any product that lies outside of these limits will need to be dispositioned as scrap.</p>
<pre class="r"><code>usl &lt;- 14.5
lsl&lt;-6
XbarR +
                  geom_hline(aes(yintercept=14.5)) +
                  geom_label(aes(x= as.Date(&#39;2019/01/01&#39;),usl,label = &quot;USL&quot;))+
                  geom_label(aes(x= as.Date(&#39;2019/01/01&#39;),usl,label = usl), nudge_x = 28)+
                  geom_hline(aes(yintercept=6)) +
                  geom_label(aes(x= as.Date(&#39;2019/01/01&#39;),lsl,label = &quot;LSL&quot;))+
                  geom_label(aes(x= as.Date(&#39;2019/01/01&#39;),lsl,label = lsl), nudge_x = 28)</code></pre>
<p><img src="ggqc_test_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>


Copyright &copy; <script>new Date().getFullYear()>2010&&document.write(+new Date().getFullYear());</script>, Amber Ahmed. All rights reserved.



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
